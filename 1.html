<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>用户信息维护</title>
    <link rel="stylesheet" href="lib/layui-v2.6.3/css/layui.css">
    <link rel="stylesheet" href="lib/font-awesome-4.7.0/css/font-awesome.min.css">
    <style>
        .required::before {
            content: "*";
            color: #ff0000;
            margin-right: 4px;
            font-weight: bold;				
        }
        .layui-form-label{
            width: 150px !important;
            text-align: left;
        }
        .layui-form-item {
            margin-bottom: 15px;
        }
        .form-container {
            width: 90%;
            max-width: 800px;
            margin: 20px auto;
            padding: 20px;
            background-color: #fff;
            border-radius: 5px;
            box-shadow: 0 1px 5px rgba(0,0,0,0.1);
        }
        .page-title {
            margin: 20px 0;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
            color: #333;
        }
        .layui-form-mid {
            color: #666;
            font-size: 12px;
        }
    </style>
</head>
<body class="layui-bg-gray">
    <div class="form-container">
        <h1 class="page-title"><i class="fa fa-user-circle-o" style="margin-right:10px;color:#1e9fff"></i>用户信息维护</h1>
        <h2 style="color:#666;margin-bottom:20px">添加用户</h2>
        
        <form class="layui-form" lay-filter="userForm">
            <!-- 用户名 -->
            <div class="layui-form-item">
                <label class="layui-form-label required">用户名</label>
                <div class="layui-input-block">
                    <input type="text" name="username" lay-verify="required|username" 
                           placeholder="字母数字组合，首字符为字母，长度3-15位" 
                           autocomplete="off" class="layui-input">
                    
                </div>
            </div>

            <!-- 密码 -->
            <div class="layui-form-item">
                <label class="layui-form-label required">密码</label>
                <div class="layui-input-block">
                    <input type="password" name="userpsw" lay-verify="required|password" 
                           placeholder="6-20位，由数字和字母组成" 
                           autocomplete="off" class="layui-input">
                   
                </div>
            </div>

            <!-- 角色 -->
            <div class="layui-form-item">
                <label class="layui-form-label required">角色</label>
                <div class="layui-input-block">
                    <select name="role" lay-verify="required|role" lay-search="">
                        <option value="">请选择角色类型</option>
                        <option value="superadmin">超级管理员</option>
                        <option value="admin">管理员</option>
                        <option value="user">普通用户</option>
                        <option value="visitor">访客</option>
                    </select>
                </div>
            </div>

            <!-- 用户状态 -->
            <div class="layui-form-item">
                <label class="layui-form-label">用户状态</label>
                <div class="layui-input-block">
                    <input type="checkbox" name="status" lay-skin="switch" 
                           lay-filter="status" lay-text="启用|禁用" checked>
                    
                </div>
            </div>

            <!-- 真实姓名 -->
            <div class="layui-form-item">
                <label class="layui-form-label required">真实姓名</label>
                <div class="layui-input-block">
                    <input type="text" name="realname" lay-verify="required|realname" 
                           placeholder="请输入真实姓名" autocomplete="off" class="layui-input">
                </div>
            </div>

            <!-- 院系 -->
            <div class="layui-form-item">
                <label class="layui-form-label required">院系</label>
                <div class="layui-input-block">
                    <input type="text" name="department" lay-verify="required" 
                           placeholder="请输入所属院系" autocomplete="off" class="layui-input">
                </div>
            </div>

            <!-- 年级 -->
            <div class="layui-form-item">
                <label class="layui-form-label required">年级</label>
                <div class="layui-input-block">
                    <input type="text" name="grade" lay-verify="required|grade" 
                           placeholder="如：2022级" autocomplete="off" class="layui-input">
                </div>
            </div>

            <!-- 专业 -->
            <div class="layui-form-item">
                <label class="layui-form-label required">专业</label>
                <div class="layui-input-block">
                    <input type="text" name="major" lay-verify="required" 
                           placeholder="请输入专业名称" autocomplete="off" class="layui-input">
                </div>
            </div>

            <!-- 班级 -->
            <div class="layui-form-item">
                <label class="layui-form-label required">班级</label>
                <div class="layui-input-block">
                    <input type="text" name="class" lay-verify="required" 
                           placeholder="如：计算机科学与技术1班" autocomplete="off" class="layui-input">
                </div>
            </div>

            <!-- 校内职务 -->
            <div class="layui-form-item">
                <label class="layui-form-label required">校内职务</label>
                <div class="layui-input-block">
                    <input type="text" name="position" lay-verify="required" 
                           placeholder="如：班长、无" autocomplete="off" class="layui-input">
                </div>
            </div>

            <!-- 手机 -->
            <div class="layui-form-item">
                <label class="layui-form-label required">手机</label>
                <div class="layui-input-block">
                    <input type="text" name="phone" lay-verify="required|phone" 
                           placeholder="请输入手机号码" autocomplete="off" class="layui-input">
                </div>
            </div>

            <!-- QQ -->
            <div class="layui-form-item">
                <label class="layui-form-label required">QQ</label>
                <div class="layui-input-block">
                    <input type="text" name="qq" lay-verify="required|qq" 
                           placeholder="请输入QQ号码" autocomplete="off" class="layui-input">
                </div>
            </div>

            <div class="layui-form-item">
                <label class="layui-form-label">备注</label>
                <div class="layui-input-block">
                    <textarea name="remark" placeholder="请输入备注信息（选填）" 
                              class="layui-textarea"></textarea>
                </div>
            </div>

            <div class="layui-form-item">
                <label class="layui-form-label"></label>
                <div class="layui-input-block">
                    <button class="layui-btn" lay-submit lay-filter="submitForm">
                        <i class="fa fa-save"></i> 保存
                    </button>
                    <button type="reset" class="layui-btn layui-btn-primary">
                        <i class="fa fa-refresh"></i> 重置
                    </button>
                </div>
            </div>
        </form>
    </div>

    <script src="lib/layui-v2.6.3/layui.js"></script>
    <script>
        layui.use(['form', 'layer'], function(){
            var form = layui.form;
            var layer = layui.layer;

            // 自定义表单验证规则
            form.verify({
                // 用户名校验：首字母，后跟字母数字，3-15位
                username: function(value){
                    if(value.length < 3 || value.length > 15){
                        return '用户名长度必须在3-15位之间';
                    }
                    var reg = /^[a-zA-Z]{1}[0-9a-zA-Z]{2,14}$/;
                    if(!reg.test(value)){
                        return '用户名必须以字母开头，且只能包含字母和数字';
                    }
                },
                // 密码校验：6-20位，数字+字母组合
                password: function(value){
                    if(value.length < 6 || value.length > 20){
                        return '密码长度必须在6-20位之间';
                    }
                    var reg = /^(?=.*[0-9])(?=.*[a-zA-Z]).{6,20}$/;
                    if(!reg.test(value)){
                        return '密码必须包含数字和字母';
                    }
                },
                // 真实姓名校验：2-6个汉字
                realname: function(value){
                    if(value.length < 2 || value.length > 6){
                        return '真实姓名长度必须在2-6个汉字之间';
                    }
                    var reg = /^[\u4e00-\u9fa5]{2,6}$/;
                    if(!reg.test(value)){
                        return '真实姓名只能包含汉字';
                    }
                },
                // 角色选择校验
                role: function(value){
                    if(value === ""){
                        return '请选择角色类型';
                    }
                },
                // 年级校验
                grade: function(value){
                    var reg = /^\d{4}级$/;
                    if(!reg.test(value)){
                        return '年级格式应为：年份+级（如：2022级）';
                    }
                },
                // 手机号校验
                phone: function(value){
                    var reg = /^1[3-9]\d{9}$/;
                    if(!reg.test(value)){
                        return '请输入有效的手机号码';
                    }
                },
                // QQ号校验：5-13位数字
                qq: function(value){
                    if(value.length < 5 || value.length > 13){
                        return 'QQ号码长度必须在5-13位之间';
                    }
                    var reg = /^\d{5,13}$/;
                    if(!reg.test(value)){
                        return 'QQ号码只能包含数字';
                    }
                }
            });

            // 监听表单提交
            form.on('submit(submitForm)', function(data){
                // 模拟表单提交
                layer.load(2);
                setTimeout(function(){
                    layer.closeAll('loading');
                    layer.msg('用户信息添加成功', {icon: 1, time: 1500}, function(){
                        // 可以在这里添加提交成功后的操作，如重置表单或跳转页面
                        // document.querySelector('form').reset();
                    });
                }, 800);
                return false; // 阻止表单默认提交
            });
        });
    </script>
</body>
</html>
